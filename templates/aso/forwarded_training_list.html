{% extends 'common/base.html' %}
{% block content %}

<div class="container mt-4">
  <div class="row">

    <!-- Sidebar -->
    <div class="col-md-3">
      {% include 'aso/sidebar.html' %}
    </div>

    <!-- Main Content -->
    <div class="col-md-9">
      <h2>Workers Sent to Mine Manager for Approval</h2>
      {% include 'common/message.html' %}

      <table id="trainingsTable" class="table table-bordered table-striped table-hover mt-3">
        <thead class="table-primary">
          <tr>
            <th scope="col">S.No.</th>
            <th scope="col">Worker Name</th>
            <th scope="col">Training From</th>
            <th scope="col">Training To</th>
            <th scope="col">Nature of Training</th>
            <th scope="col">Actions</th>
          </tr>
        </thead>
        <tbody>
          {% for training in trainings %}
          <tr>
            <td>{{ forloop.counter }}</td>
            <td>{{ training.worker.name }}</td>
            <td>{{ training.from_date|date:"d M Y" }}</td>
            <td>{{ training.to_date|date:"d M Y" }}</td>
            <td>{{ training.nature_of_training }}</td>
            <td>
              <a href="{% url 'aso:approved_worker_detail' training.pk %}" class="btn btn-info btn-sm">View Details</a>
            </td>
          </tr>
          {% empty %}
          <tr>
            <td colspan="6" class="text-center">No workers forwarded to Mine Manager.</td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
  </div>
</div>

<!-- ‚úÖ DataTables CSS -->
<link rel="stylesheet" href="https://cdn.datatables.net/1.13.6/css/dataTables.bootstrap5.min.css">
<link rel="stylesheet" href="https://cdn.datatables.net/responsive/2.5.0/css/responsive.bootstrap5.min.css">

<!-- ‚úÖ jQuery & DataTables JS -->
<script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
<script src="https://cdn.datatables.net/1.13.6/js/jquery.dataTables.min.js"></script>
<script src="https://cdn.datatables.net/1.13.6/js/dataTables.bootstrap5.min.js"></script>
<script src="https://cdn.datatables.net/responsive/2.5.0/js/dataTables.responsive.min.js"></script>
<script src="https://cdn.datatables.net/responsive/2.5.0/js/responsive.bootstrap5.min.js"></script>

<!-- ‚úÖ DataTables Initialization -->
<script>
  $(document).ready(function () {
    $('#trainingsTable').DataTable({
      responsive: true,
      order: [[6, "asc"]], // Sort by Training From date (descending)
      pageLength: 10,
      lengthMenu: [5, 10, 25, 50],
      language: {
        search: "üîç Search Worker:",
        lengthMenu: "Show _MENU_ entries"
      }
    });
  });
</script>

{% endblock %}
