{% extends 'common/base.html' %}
{% load static %}

{% block content %}
<!-- ✅ DataTables CSS -->
<link rel="stylesheet" href="https://cdn.datatables.net/1.13.6/css/jquery.dataTables.min.css">

<style>
  body {
    background-color: #f7fafd; /* ✅ Keep your original background */
    font-family: "Segoe UI", sans-serif;
  }

  h2 {
    color: #0d6efd;
    font-weight: 600;
    margin-bottom: 20px;
  }

  .btn-create {
    margin-bottom: 20px;
    border-radius: 8px;
  }

  .main-card {
    background: #ffffff;
    border-radius: 15px;
    box-shadow: 0 0 10px rgba(0, 0, 0, 0.08);
    padding: 25px;
    transition: all 0.2s ease;
  }

  .main-card:hover {
    transform: scale(1.01);
    box-shadow: 0 0 15px rgba(0, 0, 0, 0.12);
  }

  table.dataTable {
    border-radius: 10px !important;
    overflow: hidden;
  }

  table.dataTable thead th {
    background-color: #0d6efd !important;
    color: white;
    text-align: center;
  }

  table.dataTable tbody tr:hover {
    background-color: #f1f7ff;
  }

  .btn-info {
    background-color: #0dcaf0;
    border: none;
    border-radius: 6px;
  }

  .btn-info:hover {
    background-color: #31d2f2;
  }

  /* Sidebar consistent style */
  .sidebar {
    background-color: #d9f1ff;
    border-radius: 15px;
    height: 100%;
    box-shadow: 0 0 10px rgba(0,0,0,0.05);
  }
</style>

<div class="container mt-4">
  <div class="row">
    
    <!-- ✅ Sidebar -->
    <div class="col-md-3">
      {% include 'vtc/sidebar.html' %}
    </div>

    <!-- ✅ Main Worker List -->
    <div class="col-md-9">
      <div class="main-card mt-3">
        <div class="d-flex justify-content-between align-items-center">
          <h2>Registered Worker List</h2>
          <a href="{% url 'vtc:add_worker' %}" class="btn btn-success btn-create">+ New Worker</a>
        </div>

        <table id="workerTable" class="table table-bordered table-striped">
          <thead>
            <tr>
              <th>S.No.</th>
              <th>Worker Name</th>
              <th>Aadhaar</th>
              <th>Date of Birth</th>
              <th>Mobile</th>
              <th>Action</th>
            </tr>
          </thead>
          <tbody>
            {% for worker in workers %}
            <tr>
              <td>{{ forloop.counter }}</td>
              <td>{{ worker.name }}</td>
              <td>{{ worker.aadhar_number }}</td>
              <td>{{ worker.dob }}</td>
              <td>{{ worker.mobile }}</td>
              <td>
                <a href="{% url 'vtc:view_worker' worker.pk %}" class="btn btn-sm btn-info">View Details</a>
              </td>
            </tr>
            {% endfor %}
          </tbody>
        </table>
      </div>
    </div>
  </div>
</div>

<!-- ✅ DataTables JS -->
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script src="https://cdn.datatables.net/1.13.6/js/jquery.dataTables.min.js"></script>

<!-- ✅ Initialize DataTable -->
<script>
$(document).ready(function() {
  $('#workerTable').DataTable({
    "pageLength": 10,
    "order": [] // No default ordering
  });
});
</script>
{% endblock %}
